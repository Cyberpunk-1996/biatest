pipeline {
    agent any
    stages {
        stage('Environment variable') {
            steps {
                sh "echo ${env.JENKINS_URL}"
            }

        }
        stage('Setup') {
            steps {
                sh "sudo apt install python3"
                sh "sudo apt install python3-pytest -y"
                sh "sudo apt install python3-pip -y"
                sh "sudo pip install -r requirements.txt --break-system-packages"
            }
        }
        stage('Testing Flask application') {
            steps {
                sh "pytest"
                
            }
        }    
            
    }
}